{
  "version": 3,
  "sources": ["../../../app/routes/p.thread.$postId.tsx"],
  "sourcesContent": ["import * as React from \"react\";\r\nimport { LoaderArgs, json, redirect } from \"@remix-run/node\";\r\nimport { Link, useLoaderData, useLocation } from \"@remix-run/react\";\r\nimport useSubscribe from \"~/services/nostr/subscribe\";\r\nimport Posts from \"~/components/feed/user-posts-list\";\r\nimport { getUser } from \"~/services/session.server\";\r\nimport { FeedLoader } from \"~/components/loader\";\r\nimport { MainContainer, TabContainer } from \"~/components/layout/container\";\r\nimport useProfileContacts from \"~/services/nostr/profiles/contacts\";\r\nimport RightSideBar from \"~/components/feed/right-pane\";\r\nimport Menu from \"~/components/layout/menu\";\r\n\r\nexport async function loader({ request }: LoaderArgs) {\r\n  const user = await getUser(request);\r\n  if (!user) {\r\n    redirect(\"/login\");\r\n  }\r\n  return json({ user });\r\n}\r\n\r\nexport default function UserPosts({\r\n  suggestedFollows,\r\n}: {\r\n  suggestedFollows: string[];\r\n}) {\r\n  const { state }: any = useLocation();\r\n  let id = state ? state?.postId : \"\";\r\n  let pubkey = state ? state?.author : \"\";\r\n  const { events: followingPosts } = useSubscribe({\r\n    filters: [\r\n      {\r\n        kinds: [1],\r\n        limit: 1000,\r\n      },\r\n    ],\r\n    relays: [\r\n      \"wss://relay.gems.xyz\",\r\n      \"wss://relay.damus.io\",\r\n      \"wss://relay.snort.social\",\r\n    ],\r\n    options: { cacheRefresh: true, force: true, closeAfterEose: false },\r\n  });\r\n\r\n  const { latestContactEvent } = useProfileContacts(pubkey);\r\n  const { user } = useLoaderData();\r\n  const authors =\r\n    latestContactEvent?.tags\r\n      ?.filter((tag) => tag[0] === \"p\")\r\n      .map((tag) => tag[1]) || [];\r\n  authors.push(pubkey);\r\n  const singlePost = React.useMemo(() => {\r\n    if (id) {\r\n      return followingPosts.find((event) => event.id === id);\r\n    }\r\n    return null;\r\n  }, [id, followingPosts]);\r\n\r\n  return (\r\n    <>\r\n      <Menu user={user}></Menu>\r\n      <MainContainer>\r\n        <TabContainer>\r\n          <div className=\"mt-1 flex justify-between\">\r\n            <Link to=\"/feed\">\r\n              <div className=\"flex py-2 text-c-lightgray\">\r\n                <h1 className=\"ml-3 font-bold text-c-cyan\">BACK TO FEED</h1>\r\n              </div>\r\n            </Link>\r\n            <div className=\"mr-3 flex py-2  text-c-lightgray\">\r\n              <h1 className=\" font-bold text-c-cyan\">THREAD</h1>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-3 h-[1px] w-full bg-c-shadegray\"></div>\r\n          <div className=\"h-screen overflow-y-auto transition duration-500 scrollbar-hide \">\r\n            {singlePost ? <Posts events={[singlePost]} /> : <FeedLoader />}\r\n          </div>\r\n        </TabContainer>\r\n        <RightSideBar authors={authors} />\r\n      </MainContainer>\r\n    </>\r\n  );\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,YAAuB;AACvB,kBAA2C;AAI3C,qBAAwB;AAqDpB;AAtCW,SAAR,UAA2B;AAAA,EAChC;AACF,GAEG;AAxBH;AAyBE,QAAM,EAAE,MAAM,IAAS,YAAY;AACnC,MAAI,KAAK,QAAQ,+BAAO,SAAS;AACjC,MAAI,SAAS,QAAQ,+BAAO,SAAS;AACrC,QAAM,EAAE,QAAQ,eAAe,IAAI,aAAa;AAAA,IAC9C,SAAS;AAAA,MACP;AAAA,QACE,OAAO,CAAC,CAAC;AAAA,QACT,OAAO;AAAA,MACT;AAAA,IACF;AAAA,IACA,QAAQ;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,IACA,SAAS,EAAE,cAAc,MAAM,OAAO,MAAM,gBAAgB,MAAM;AAAA,EACpE,CAAC;AAED,QAAM,EAAE,mBAAmB,IAAI,iBAAmB,MAAM;AACxD,QAAM,EAAE,KAAK,IAAI,cAAc;AAC/B,QAAM,YACJ,8DAAoB,SAApB,mBACI,OAAO,CAAC,QAAQ,IAAI,CAAC,MAAM,KAC5B,IAAI,CAAC,QAAQ,IAAI,CAAC,OAAM,CAAC;AAC9B,UAAQ,KAAK,MAAM;AACnB,QAAM,aAAmB,cAAQ,MAAM;AACrC,QAAI,IAAI;AACN,aAAO,eAAe,KAAK,CAAC,UAAU,MAAM,OAAO,EAAE;AAAA,IACvD;AACA,WAAO;AAAA,EACT,GAAG,CAAC,IAAI,cAAc,CAAC;AAEvB,SACE,sFACE;AAAA,uDAAC,QAAK,QAAN;AAAA;AAAA;AAAA;AAAA,WAAkB;AAAA,IAClB,mDAAC,iBACC;AAAA,yDAAC,gBACC;AAAA,2DAAC,SAAI,WAAU,6BACb;AAAA,6DAAC,QAAK,IAAG,SACP,6DAAC,SAAI,WAAU,8BACb,6DAAC,QAAG,WAAU,8BAA6B,4BAA3C;AAAA;AAAA;AAAA;AAAA,iBAAuD,KADzD;AAAA;AAAA;AAAA;AAAA,iBAEA,KAHF;AAAA;AAAA;AAAA;AAAA,iBAIA;AAAA,UACA,mDAAC,SAAI,WAAU,oCACb,6DAAC,QAAG,WAAU,0BAAyB,sBAAvC;AAAA;AAAA;AAAA;AAAA,iBAA6C,KAD/C;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,aARF;AAAA;AAAA;AAAA;AAAA,eASA;AAAA,QACA,mDAAC,SAAI,WAAU,wCAAf;AAAA;AAAA;AAAA;AAAA,eAAoD;AAAA,QACpD,mDAAC,SAAI,WAAU,oEACZ,uBAAa,mDAAC,SAAM,QAAQ,CAAC,UAAU,KAA1B;AAAA;AAAA;AAAA;AAAA,eAA6B,IAAK,mDAAC,gBAAD;AAAA;AAAA;AAAA;AAAA,eAAY,KAD9D;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,WAdF;AAAA;AAAA;AAAA;AAAA,aAeA;AAAA,MACA,mDAAC,aAAa,WAAd;AAAA;AAAA;AAAA;AAAA,aAAgC;AAAA,SAjBlC;AAAA;AAAA;AAAA;AAAA,WAkBA;AAAA,OApBF;AAAA;AAAA;AAAA;AAAA,SAqBA;AAEJ;",
  "names": []
}
